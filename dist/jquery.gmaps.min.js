!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";var e=window.Gmaps||{};e=function(){function e(e,a,o){var r=this,o=o;r.index=o,r.id="jquery-gmaps-"+o,r.url="https://maps.googleapis.com/maps/api/js",r.key=r._getKey(e),r.zoom=r._getZoom(e),r.lang=r._getLanguage(),r.markers=r._getMarkers(e),r.$map=t(e),r.style=r._getStyle(a),r.map=null,r.bounds=null,r.infowindows=[],t(e).addClass("googlemap");var n=document.createElement("div");t(n).addClass("googlemap-overview"),t(n).addClass(r.id),t(e).prepend(t(n)),r.script(!0)}return e}(),e.prototype.script=function(t){var e=this;if(0==e.index){var a=e.url;if(!e.key)return!1;a+="?key="+e.key;var o=document.createElement("script");o.type="text/javascript",o.src=a,o.id="gmaps-script",o.async=!0,o.defer=!0,document.body.appendChild(o)}var r=setInterval(function(){void 0!==window.google&&(window.clearInterval(r),e.create())},100)},e.prototype._getStyle=function(t){try{return t.style}catch(t){return!1}},e.prototype._getKey=function(e){return t(e).attr("data-key")},e.prototype._getZoom=function(e){var a=t(e).attr("data-zoom");return void 0!==a&&""!==a||(a=4),parseInt(a)},e.prototype._getLanguage=function(){var e=t("html"),a=e.attr("lang");return void 0!==a&&""!==a||(a="en"),a},e.prototype._getMarkers=function(e){var a=this,o=t(e).find(".marker"),r=[];return o.each(function(e,o){var n={lat:parseFloat(t(o).attr("data-lat")),lng:parseFloat(t(o).attr("data-lng")),html:t(o).html(),icon:a._getIcon(o),draggable:Boolean(t(o).attr("data-draggable"))};r.push(n)}),r},e.prototype._getIcon=function(e){var a=t(e).attr("data-marker-image"),o=parseInt(t(e).attr("data-marker-width")),r=parseInt(t(e).attr("data-marker-height"));return!(void 0===a||!t.isNumeric(o)||!t.isNumeric(r))&&{url:a,width:o,height:r}},e.prototype.create=function(){var e=this,a=t("."+e.id),o={};o.zoom=e.zoom,o.zoomControl=!0,o.mapTypeControl=!0,o.scaleControl=!0,o.streetViewControl=!0,o.rotateControl=!0,o.fullscreenControl=!0,!1!==e.style&&(o.styles=e.style),e.map=new google.maps.Map(a.get(0),o),t.each(e.markers,function(t,a){e.addMarker(a)}),e.setCenter(),e.$map.trigger("onLoad")},e.prototype.addMarker=function(e){var a=this,o={};if(o.position=new google.maps.LatLng(e.lat,e.lng),o.map=a.map,o.clickable=!0,o.animation=google.maps.Animation.DROP,!1!==e.icon){o.icon=e.icon;e.icon.url,new google.maps.Size(e.icon.width,e.icon.height)}!1!==e.draggable&&(o.draggable=!0);var r=new google.maps.Marker(o),n=new google.maps.InfoWindow({content:e.html});a.infowindows.push(n),r.addListener("click",function(){t.each(a.infowindows,function(t,e){e.close()}),n.open(a.map,r),a.map.setCenter(this.getPosition()),a.$map.trigger("onMarkerClick")}),a.map.setCenter(o.position)},e.prototype.setCenter=function(){var e=this,a=new google.maps.LatLngBounds;t.each(e.markers,function(t,e){var o=new google.maps.LatLng(e.lat,e.lng);a.extend(o)}),1===e.markers.length?e.map.setCenter(a.getCenter()):e.map.fitBounds(a)},t.fn.gmaps=function(){var t,a,o=this,r=arguments[0],n=Array.prototype.slice.call(arguments,1),i=o.length;for(t=0;t<i;t++)if("object"==typeof r||void 0===r?o[t].gmap=new e(o[t],r,t):a=o[t].gmap[r].apply(o[t].gmap,n),void 0!==a)return a;return o}});