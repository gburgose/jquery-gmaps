!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";var e=window.Gmaps||{};e=function(){function e(e,o,r){var n=this,r=r;n.index=r,n.id="jquery-gmaps-"+r,n.url="https://maps.googleapis.com/maps/api/js",n.key=n._getKey(e),n.zoom=n._getZoom(e),n.lang=n._getLanguage(),n.markers=n._getMarkers(e),n.$map=t(e),n.style=n._getStyle(o),n.map=null,n.bounds=null,n.infowindows=[],t(e).addClass("googlemap");var a=document.createElement("div");t(a).addClass("googlemap-overview"),t(a).addClass(n.id),t(e).prepend(t(a)),n.script(!0)}return e}(),e.prototype._getStyle=function(t){try{return t.style}catch(t){return!1}},e.prototype._getKey=function(e){return t(e).attr("data-key")},e.prototype._getZoom=function(e){var o=t(e).attr("data-zoom");return void 0!==o&&""!==o||(o=4),parseInt(o)},e.prototype._getLanguage=function(){var e=t("html"),o=e.attr("lang");return void 0!==o&&""!==o||(o="en"),o},e.prototype._getMarkers=function(e){var o=this,r=t(e).find(".marker"),n=[];return r.each(function(e,r){var a={lat:parseFloat(t(r).attr("data-lat")),lng:parseFloat(t(r).attr("data-lng")),html:t(r).html(),icon:o._getIcon(r)};n.push(a)}),n},e.prototype._getIcon=function(e){var o=t(e).attr("data-marker-image"),r=parseInt(t(e).attr("data-marker-width")),n=parseInt(t(e).attr("data-marker-height"));return!(void 0===o||!t.isNumeric(r)||!t.isNumeric(n))&&{url:o,width:r,height:n}},e.prototype.script=function(t){var e=this;if(0==e.index){var o=e.url;if(!e.key)return!1;o+="?key="+e.key;var r=document.createElement("script");r.type="text/javascript",r.src=o,r.id="gmaps-script",r.async=!0,r.defer=!0,document.body.appendChild(r)}var n=setInterval(function(){void 0!==window.google&&(window.clearInterval(n),e.create())},100)},e.prototype.create=function(){var e=this,o=t("."+e.id),r={};r.zoom=e.zoom,r.zoomControl=!0,r.mapTypeControl=!1,r.scaleControl=!0,r.streetViewControl=!1,r.rotateControl=!1,r.fullscreenControl=!1,!1!==e.style&&(r.styles=e.style),e.map=new google.maps.Map(o.get(0),r),t.each(e.markers,function(t,o){e.addMarker(o)}),e.setCenter(),e.$map.trigger("onLoad")},e.prototype.addMarker=function(e){var o=this,r={};if(r.position=new google.maps.LatLng(e.lat,e.lng),r.map=o.map,!1!==e.icon){r.icon=e.icon;e.icon.url,new google.maps.Size(e.icon.width,e.icon.height)}var n=new google.maps.Marker(r),a=new google.maps.InfoWindow({content:e.html});o.infowindows.push(a),n.addListener("click",function(){t.each(o.infowindows,function(t,e){e.close()}),a.open(o.map,n),o.map.setCenter(this.getPosition()),o.$map.trigger("onMarkerClick")}),o.map.setCenter(r.position)},e.prototype.setCenter=function(){var e=this,o=new google.maps.LatLngBounds;t.each(e.markers,function(t,e){var r=new google.maps.LatLng(e.lat,e.lng);o.extend(r)}),1===e.markers.length?e.map.setCenter(o.getCenter()):e.map.fitBounds(o)},t.fn.gmaps=function(){var t,o,r=this,n=arguments[0],a=Array.prototype.slice.call(arguments,1),i=r.length;for(t=0;t<i;t++)if("object"==typeof n||void 0===n?r[t].gmap=new e(r[t],n,t):o=r[t].gmap[n].apply(r[t].gmap,a),void 0!==o)return o;return r}});