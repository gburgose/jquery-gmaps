!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=window.Gmaps||{};t=function(){function t(t,n){var o=this,a=e(t).index();o.index=a,o.id="jquery-gmaps-"+a,o.url="https://maps.googleapis.com/maps/api/js",o.key=o._getKey(t),o.zoom=o._getZoom(t),o.lang=o._getLanguage(),o.markers=o._getMarkers(t),o.map=null,o.bounds=null,o.infowindows=[],e(t).addClass("googlemap");var r=document.createElement("div");e(r).addClass("googlemap-overview"),e(r).addClass(o.id),e(t).prepend(e(r)),o.script(!0)}return t}(),t.prototype._getKey=function(t){return e(t).attr("data-key")},t.prototype._getZoom=function(t){var n=e(t).attr("data-zoom");return void 0!==n&&""!==n||(n=4),parseInt(n)},t.prototype.getIcon=function(e){},t.prototype._getLanguage=function(){var t=e("html"),n=t.attr("lang");return void 0!==n&&""!==n||(n="en"),n},t.prototype._getMarkers=function(t){var n=e(t).find(".marker"),o=[];return n.each(function(t,n){var a={lat:parseFloat(e(n).attr("data-lat")),lng:parseFloat(e(n).attr("data-lng")),html:e(n).html()};o.push(a)}),o},t.prototype.script=function(e){var t=this;if(0==t.index){var n=t.url;if(!t.key)return!1;n+="?key="+t.key;var o=document.createElement("script");o.type="text/javascript",o.src=n,o.id="gmaps-script",o.async=!0,o.defer=!0,document.body.appendChild(o)}var a=setInterval(function(){void 0!==window.google&&(window.clearInterval(a),t.create())},100)},t.prototype.create=function(){var t=this,n=e("."+t.id);t.map=new google.maps.Map(n.get(0),{zoom:t.zoom,zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1}),e.each(t.markers,function(e,n){t.addMarker(n.lat,n.lng,n.html)}),t.setCenter()},t.prototype.addMarker=function(t,n,o){var a=this,r=new google.maps.Marker({position:{lat:t,lng:n},map:a.map}),i=new google.maps.InfoWindow({content:o});a.infowindows.push(i),r.addListener("click",function(){e.each(a.infowindows,function(e,t){t.close()}),i.open(a.map,r),a.map.setCenter(this.getPosition())}),a.map.setCenter({lat:t,lng:n})},t.prototype.setCenter=function(){var t=this,n=new google.maps.LatLngBounds;e.each(t.markers,function(e,t){var o=new google.maps.LatLng(t.lat,t.lng);n.extend(o)}),1===t.markers.length?t.map.setCenter(n.getCenter()):t.map.fitBounds(n)},e.fn.gmaps=function(){var e,n,o=this,a=arguments[0],r=Array.prototype.slice.call(arguments,1),i=o.length;for(e=0;e<i;e++)if("object"==typeof a||void 0===a?o[e].gmap=new t(o[e],a):n=o[e].gmap[a].apply(o[e].gmap,r),void 0!==n)return n;return o}});