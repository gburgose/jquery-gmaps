!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=window.Gmaps||{};t=function(){function t(t,o,n){var r=this,n=n;r.index=n,r.id="jquery-gmaps-"+n,r.url="https://maps.googleapis.com/maps/api/js",r.key=r._getKey(t),r.zoom=r._getZoom(t),r.lang=r._getLanguage(),r.markers=r._getMarkers(t),r.$map=e(t),r.map=null,r.bounds=null,r.infowindows=[],e(t).addClass("googlemap");var a=document.createElement("div");e(a).addClass("googlemap-overview"),e(a).addClass(r.id),e(t).prepend(e(a)),r.script(!0)}return t}(),t.prototype._getKey=function(t){return e(t).attr("data-key")},t.prototype._getZoom=function(t){var o=e(t).attr("data-zoom");return void 0!==o&&""!==o||(o=4),parseInt(o)},t.prototype._getLanguage=function(){var t=e("html"),o=t.attr("lang");return void 0!==o&&""!==o||(o="en"),o},t.prototype._getMarkers=function(t){var o=this,n=e(t).find(".marker"),r=[];return n.each(function(t,n){var a={lat:parseFloat(e(n).attr("data-lat")),lng:parseFloat(e(n).attr("data-lng")),html:e(n).html(),icon:o._getIcon(n)};r.push(a)}),r},t.prototype._getIcon=function(t){var o=e(t).attr("data-marker-image"),n=parseInt(e(t).attr("data-marker-width")),r=parseInt(e(t).attr("data-marker-height"));return!(void 0===o||!e.isNumeric(n)||!e.isNumeric(r))&&{url:o,width:n,height:r}},t.prototype.script=function(e){var t=this;if(0==t.index){var o=t.url;if(!t.key)return!1;o+="?key="+t.key;var n=document.createElement("script");n.type="text/javascript",n.src=o,n.id="gmaps-script",n.async=!0,n.defer=!0,document.body.appendChild(n)}var r=setInterval(function(){void 0!==window.google&&(window.clearInterval(r),t.create())},100)},t.prototype.create=function(){var t=this,o=e("."+t.id);t.map=new google.maps.Map(o.get(0),{zoom:t.zoom,zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1}),e.each(t.markers,function(e,o){t.addMarker(o)}),t.setCenter(),t.$map.trigger("onLoad")},t.prototype.addMarker=function(t){var o=this,n={};if(n.position=new google.maps.LatLng(t.lat,t.lng),n.map=o.map,!1!==t.icon){n.icon=t.icon;t.icon.url,new google.maps.Size(t.icon.width,t.icon.height)}var r=new google.maps.Marker(n),a=new google.maps.InfoWindow({content:t.html});o.infowindows.push(a),r.addListener("click",function(){e.each(o.infowindows,function(e,t){t.close()}),a.open(o.map,r),o.map.setCenter(this.getPosition()),o.$map.trigger("onMarkerClick")}),o.map.setCenter(n.position)},t.prototype.setCenter=function(){var t=this,o=new google.maps.LatLngBounds;e.each(t.markers,function(e,t){var n=new google.maps.LatLng(t.lat,t.lng);o.extend(n)}),1===t.markers.length?t.map.setCenter(o.getCenter()):t.map.fitBounds(o)},e.fn.gmaps=function(){var e,o,n=this,r=arguments[0],a=Array.prototype.slice.call(arguments,1),i=n.length;for(e=0;e<i;e++)if("object"==typeof r||void 0===r?n[e].gmap=new t(n[e],r,e):o=n[e].gmap[r].apply(n[e].gmap,a),void 0!==o)return o;return n}});